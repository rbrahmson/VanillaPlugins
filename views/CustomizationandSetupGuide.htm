<h1>Feed Discussion Plus Plugin - ​​​​Customization and Setup Guide</h1><p></p><div><b>Preface</b><p>The Feed Discussion Plus plugin was created to address requests from users in my intranet community. &nbsp;In my research I discovered that many feeds do not adhere to imperfect feed coding standards, some feeds mix more than one standard, and some just miss information required to interpret them correctly. &nbsp; I attempted to address all these issues, but there are no guarantees - a specific feed you define with this plugin may not import items at all or only at some times.</p><p>I'd like to give credit and thanks to the authors of the original&nbsp;<a rel="nofollow" target="_blank" href="https://open.vanillaforums.com/addon/feeddiscussions-plugin">Feed Discussion plugin</a>&nbsp;which I used as a basis for this plugin a long while ago.&nbsp;<br></p><p><b>Feed Discussion Plus Features:</b></p><ol><li>Support for both ATOM and RSS encoded feeds</li><li>Support for compressed feeds</li><li>Individual settings for each feed</li><li>Filtering of content imported into the Vanilla forum based on specified keywords</li><li>Optional setting of minimal number of words per imported feed item (to avoid teaser feed items)</li><li>Optional limit on the number of items imported from each feed</li><li>Option to show the feed's/site's logo instead of the default "system" author&nbsp;</li><li>Option to remove linked images from imported feed</li><li>Option to set server window hours when feeds are imported</li><li>Option to disable individual feeds (while preserving their definitions)</li><li>Admin option to initiate manual feed import</li><li>Detailed report of admin initiated import</li><li>Support for cron initiated feed imports</li><li>Alphabetically sorted list of defined feeds with the active feeds on top</li><li>Autodiscovery of feed url when admin enters a host url that supports feed discovery</li><li>Revised user interface<br></li></ol>Given all these options I highly recommend you read this short guide before configuring the plugin.<br><b><br>Performance and Feed Import Operation<br><br></b>It is important to understand the performance impact of feed imports on response time and scalability. &nbsp;Since Vanilla does not have an independent scheduling mechanism running on a separate thread (PHP is a single-thread application - it cannot split off a task to run separately from a page load), the only current way to check whether a new feed item needs to be imported is by interrupting a page load request initiated by one of the forum users, perform the feed import task, and then complete the user request. &nbsp;Depending on the amount of feed items needed to import that user may have a long wait until his/her requested page loads. &nbsp; If the number of feed items to import is small, the delay is negligible.&nbsp;<br><b><br></b>To reduce this impact the test for new feed items is limited to these events:<br><ol><li>User-initiated request to display <i>a specific discussion </i>(when the user displays a list of discussions no feed-import test occur).&nbsp;&nbsp;The assumption is that there is more browsing through discussion lists than going to a specific discussion, and thus most of the forum activity won't be affected. &nbsp; As you will see below, there are additional options that reduce the import overhead for each feed (active window hours, filters, import counts - see below).&nbsp;<br><br></li><li>A cron process invokes the feed import process. &nbsp;Clearly it is better to schedule a cron process to low activity hours.&nbsp;<br><br></li><li>Manual feed import initiated by the administrator</li></ol>The administrator can limit imports to the last two options mentioned above (See&nbsp;"Advanced Settings" &nbsp;below). &nbsp;This may be advisable if the number of imported feeds and items is large and their import setting is frequent (e.g. news grabbing site).</div><div><p>Regardless of the three import methods mentioned above, each <i>activated </i>feed has these setting options:</p><ol><li>Import Frequency (e.g. hourly, daily, weekly).</li><li>Optional hours window when imports are performed. Note that if you specify window hours for imports and there are no active users who bring up discussions for display at the permissible window hours, user initiated imports will not occur (e..g You set the import window hours to 03-04 where all your active users are sound asleep).</li><li>Optional limit on the number of items imported per feed.</li><li>Optional filters on the content of items to be imported.</li></ol>Once the import process starts, it checks each of the defined feeds to see if it is active and if it has a defined window of import hours. &nbsp;Only if it is active and within the specified window active hours, the feed will be a candidate for import. &nbsp;<br></div><div><br>Every candidate feed for import is checked whether new feed items are available for import. &nbsp;Such items will still be subject to any defined filters. &nbsp;The overall process may result in many, few, or no items to import. &nbsp;<br><br>There are three performance issues to consider:<br><ol><li>The checking of feeds active/inactive state and import window hours. &nbsp;This is done without looking at external data and is relatively efficient.</li><li>Checking if a feed has new items (This only happens if the tests in #1 above succeeds). &nbsp;This requires loading the feed's data from the website and takes longer. &nbsp;This is where most of the delay occur.</li><li>If there are new items to import (namely they passed filter checks) then the saving of new discussions require Vanilla database access to save each item.</li></ol>Note: The server clock is used with the window-hours test.&nbsp;Since the server clock may differ from the admin login clock the configuration screen displays the server clock hours.<br><br><b>Feed Information</b><p></p><p>The configuration screen displays information about the feed. &nbsp;It tells you if the feed is compressed ("gzip" attribute), whether it is an RSS or ATOM feed, and other settings you define for each feed. &nbsp;If the feed overall title is available it will be shown. &nbsp;If not and the website title is defined it is displayed instead.&nbsp;</p><p><b>cron process</b></p><p>The manual import process requires a Vanilla administrator permission. &nbsp;Since the cron job is external to Vanilla the cron link does not require this permission. &nbsp;To prevent users from invoking the cron link you first set up a code in the Vanilla config.php file and then specify the code in the url cron is invoking:</p><blockquote class="Quote">$Configuration['Plugins']['FeedDiscussionsPlus']['croncode'] = 'secret';<br></blockquote><p>To cron-invoke the import process for the above setting you need to set it to invoke the following link:</p><blockquote class="Quote">yourforum/plugin/feeddiscussionsplus//CheckFeeds/cron/secret</blockquote><p><b>Advanced Settings</b></p><p><u>Imported DIscussion Author</u></p><p>The author of the imported feed item is determined in the following way:</p><ol><li>If there is a defined user named "Feed" it is used as the imported discussion author. &nbsp;You can use this feature to define such a userid and create a thumbnail that would be used to highlight that the discussion is imported from a feed.</li><li>If you have not defined a "Feed" user the &lt;i&gt;system&lt;/i&gt; user is used as the author.</li></ol>As mentioned earlier, there is a configuration option that displays the feed's logo. &nbsp;If this option is set the plugin style setting will try to overlay this logo instead of the author's thumbnail. &nbsp;It's a display matter only - the actual author is set in the manner explained earlier. &nbsp; &nbsp;Also note that this presentation of the logo instead of the author's thumbnail is theme-dependent. &nbsp;It may not work for some.<br><br><u>Limiting Import Events</u><br><br>As explained earlier, there are three possible feed import events:<br><br><ol><li>User-initiated (by displaying a specific discussion).</li><li>cron-initiated.</li><li>Admin initiated.</li></ol>By default all three are enabled. &nbsp;To disable the user-initiated event enter the following in the Vanilla config.php file:<blockquote class="Quote">$Configuration['Plugins']['FeedDiscussionsPlus']['Userinitiated'] = false;<br></blockquote><p><br></p><b>Diagnosing errors</b><p><u>Validating Feeds</u></p><p>You can use the "&nbsp;Issues ? Run Feed Validator" button on the feed edit screen to run a feed validator on a feed url. &nbsp; The results of the feed validator do not necessarily correlate with this plugin's ability to read feeds, but feeds with major errors would probably not be imported.</p><p><u>Presentation Errors</u></p><p>The plugin was tested on several themes. &nbsp;If the feed information does not display correctly try another theme or use the browser's web inspector to check the style in error. &nbsp;&nbsp;</p><p><u>Error Messages</u></p><p>The plugin attempts to report on possible errors. &nbsp;The error messages often includes numeric codes that reflect the line number in the code where the error occurs. &nbsp;Hopefully this will help you resolve issues.</p><p><u>Perform Manual Import First</u></p><p>It is advisable to try to perform an admin initiated manual import for any problematic feed just to see through the import reports what happens.</p></div>