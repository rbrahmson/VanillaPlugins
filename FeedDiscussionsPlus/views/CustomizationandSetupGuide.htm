<h1>Feed Discussion Plus Plugin - ​​​​Customization and Setup Guide</h1><span style="margin:6px"><p></p><div><b>Preface</b><p>The Feed Discussion Plus plugin was created to address requests from users in my intranet community.&nbsp; My research discovered that many feeds do not adhere to feed coding standards, some mix more than one standard, and the standards themselves are outdated and lacking. &nbsp; I attempted to address all these issues, but there are no guarantees - a specific feed you define with this plugin may not import items at all or only at some times.&nbsp;</p><p>I'd like to give credit and thanks to the authors of the original&nbsp;<a rel="nofollow" target="_blank" href="https://open.vanillaforums.com/addon/feeddiscussions-plugin">Feed Discussion plugin</a>&nbsp;which I used long ago as a basis for this plugin.&nbsp;</p><p><b>The Purpose</b></p><p>Simply to increase forum engagement by importing relevant information from multiple external sources.&nbsp; You can import feeds from sites that support RSS, Twitter Feeds, and YouTube channels.&nbsp; &nbsp;If your selection of sources, imported material, and caegorization make sense, users will more likely comment on the imported discussions and be engaged i the forum.</p><p>TYpical example include product forums where product information, announcements, news are imported to allow users to comment on them.</p><p><b>Main Features:</b></p><ol><li>Support for both ATOM and RSS encoded feeds in compressed and uncompressed form</li><li>Support for YouTube channels and Twitter Feeds</li><li>Filtering of content imported into the Vanilla forum based on specified keywords</li><li>Optional setting of minimal number of words per imported feed item (to avoid teaser feed items)</li><li>Optional limit on the number of items imported from each feed</li><li>Option to show the feed's/site's logo instead of the default "system" as author&nbsp;</li><li>Option to remove linked images from imported feed</li><li>Option to set server window hours (for when feeds are imported)</li><li>Option to disable individual feeds (while preserving their definitions)</li><li>Feed imports can be controlled manually by the admin, cron job, or automatic</li><li>Detailed report of admin initiated import</li><li>Autodiscovery of the feed url when admin enters a host url (that supports auto-feed discovery)<br></li><li>Individual settings for each feed</li></ol><b><br>Performance and Feed Import Operation<br><br></b>It is important to understand the performance impact of feed imports on response time and scalability. &nbsp;Since Vanilla does not have an independent scheduling mechanism running on a separate thread (PHP is a single-thread application - it cannot split off a task to run separately from a page load), the only automatic internal way to check whether a new feed item needs to be imported is by interrupting a page load request initiated by one of the forum users, perform the feed import task, and then complete the user request. &nbsp;Depending on the amount of feed items needed to import that user may have a long wait until his/her requested page loads. &nbsp; If the number of feed items to import is small, the delay is negligible.&nbsp;<br><b><br></b>To reduce this impact the test for new feed items is limited to these events:<br><ol><li>User-initiated request to display&nbsp;<i>a specific discussion&nbsp;</i>(when the user displays a list of discussions no feed-import test occur).&nbsp;&nbsp;The assumption is that there is more browsing through discussion lists than going to a specific discussion, and thus most of the forum activity won't be affected. &nbsp; As you will see below, there are additional options that reduce the import overhead for each feed.&nbsp; Note that the user-initiated process is disable for mobile users (as to not further slow down users who may be on a slow connection).<br><br></li><li>A cron job can invoke the feed import process. &nbsp;Clearly it is better to schedule a cron process to low activity hours.&nbsp;<br><br></li><li>Manual feed import initiated by the administrator (in which case the administrator is affected by any delay).</li></ol><br>The administrator can disable the user initiated method thus limiting imports to the last two options mentioned above (See&nbsp;"Advanced Settings" &nbsp;below). &nbsp;This may be advisable if the number of imported feeds and items is large and their import setting is frequent (e.g. frequent news grabbing site).</div><div><p>Regardless of the three import methods mentioned above, each&nbsp;<i>activated&nbsp;</i>feed has these setting options:</p><ol><li>Import Frequency (e.g. hourly, daily, weekly,every Monday).</li><li>Optional window&nbsp;hours when imports are performed. Note that if you specify window hours for imports and there are no active users who bring up discussions for display at the permissible window hours, user initiated imports will not occur (e..g You set the import window hours to 03-04 where all your active users are sound asleep).</li><li>Optional limit on the number of items imported per feed.</li><li>Optional filters on the content of items to be imported.</li></ol><br>Once the import process starts, it checks each of the defined feeds to see if it is active and if it has a defined window of import hours. &nbsp;Only if it is active and within the specified window active hours, the feed will be a candidate for import.&nbsp; &nbsp; Thereafter every candidate feed for import is checked whether new feed items are available for import. &nbsp;Such new items will still be subject to any defined filters. &nbsp;The overall process may result in many, few, or no items to import.&nbsp;&nbsp;</div><div><br>There are three performance issues to consider:<br><ol><li>The checking of feeds active/inactive state and import window hours. &nbsp;This is done without looking at external data and is efficient.</li><li>Checking if a feed has new items (This only happens if the tests in #1 above succeeds). &nbsp;This requires loading the feed's data from the website and takes longer. &nbsp;This is where most of the delay occur (as it depends on your internet speed and external servers response time).</li><li>If there are new items to import (namely they passed filter checks) then the saving of new discussions require Vanilla database access to save each item as a new discussion.</li></ol><br><b>Feed Information</b><p></p><p>The configuration screen displays information about the feed. &nbsp;It tells you if the feed is compressed ("gzip" attribute), whether it is an RSS or ATOM feed, and other settings you define for each feed. &nbsp;If the feed overall title is available it will be shown. &nbsp;If not and the website title is defined, it is displayed instead.&nbsp;</p><p><b>cron process</b></p><p>The manual import process requires a Vanilla administrator permission. &nbsp;Since the cron job is external to Vanilla the cron link does not require this permission. &nbsp;To prevent users from invoking the cron link (should they ever figure that out) you need to set up a secret code in the Vanilla config.php file and then specify the code in the url cron is invoking:</p><blockquote class="Quote">$Configuration['Plugins']['FeedDiscussionsPlus']['croncode'] = 'mysecret';<br></blockquote><p>To cron-invoke the import process for the above setting you need to set it to invoke the following link:</p><blockquote class="Quote">yourforum/plugin/feeddiscussionsplus//CheckFeeds/cron/mysecret</blockquote><p><b>Advanced Settings</b></p><p><u>Imported DIscussion Author</u></p><p>The author of the imported feed item is determined in the following way:</p><ol><li>If there is a defined user named "Feed" it is used as the imported discussion author. &nbsp;You can use this feature to define such a userid and create a thumbnail that would be used to highlight that the discussion is imported from a feed.</li><li>If you have not defined a "Feed" user the <i>System</i> user is used as the author.</li></ol><u>Displaying the Feed Logo</u><br><br>There is a forum option that displays the feed's logo. &nbsp;If this option is set the plugin style setting will try to overlay the author's thumbnail with the forum logo. &nbsp;It's a display matter only - the actual author is set in the manner explained earlier. Note that this forum logo presentation instead of the author's thumbnail is theme-dependent. &nbsp;It may not work for some themes in which case you may want to override the plugin CSS (I recommend using the CSSEdit plugin for that).<br><br><u>Limiting Import Events</u><br><br>As explained earlier, there are three possible feed import events:<br><ol><li>User-initiated (by displaying a specific discussion).</li><li>cron-initiated.</li><li>Admin initiated.</li></ol>By default all three are enabled. &nbsp;To disable the user-initiated event enter the following in the Vanilla config.php file:<br><br><blockquote class="Quote">$Configuration['Plugins']['FeedDiscussionsPlus']['Userinitiated'] = false;</blockquote><b><br>Diagnosing errors</b><p><u>Validating Feeds</u></p><p>You can use the "&nbsp;Issues ? Run Feed Validator" button on the feed edit screen to run a feed validator on a feed url. &nbsp; The results of the feed validator do not necessarily correlate with this plugin's ability to read feeds, but feeds with major errors would probably not be imported.</p><p><u>Presentation Errors</u></p><p>The plugin was tested on several themes. &nbsp;If the feed information does not display correctly try another theme or use the browser's web inspector to check and correct the&nbsp; error. &nbsp;&nbsp;</p><p><u>What version and source are you using</u></p><p>The plugin title on the admin screens of the feedlist and feed edit shows the plugin version (e.g.&nbsp;<b>Feed Discussions Plus (Version 1.1.2).&nbsp;</b>&nbsp;If you hover the cursor on that title the specific php source file name is displayed.</p><p><u>Error Messages</u></p><p>The plugin attempts to report on possible errors. &nbsp;The error messages include numeric code combinations that reflect the line numbers in the code where the error occurs. &nbsp;Hopefully this will help resolve issues.</p></div><div><p><u>Perform Manual Import First</u></p><p>It is advisable to try to perform an admin initiated manual import for any problematic feed just to see what happens through the import reports.</p></div></span>